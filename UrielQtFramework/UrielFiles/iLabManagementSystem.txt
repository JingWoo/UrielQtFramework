use ilabmanagementsystem;

SET FOREIGN_KEY_CHECKS=0;

DROP TABLE IF EXISTS `account_number`;
CREATE TABLE `account_number` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `NAME` varchar(80) NOT NULL DEFAULT '',
  `SCHOOL_WORK_NUMBER` varchar(20) NOT NULL DEFAULT '',
  `EMAIL` varchar(80) NOT NULL DEFAULT '',
  `PHONE_NUMBER` varchar(30) NOT NULL DEFAULT '',
  `BANK_TYPE` varchar(20) NOT NULL DEFAULT '',
  `BANK_CARD_NUMBER` varchar(30) NOT NULL DEFAULT '',
  `PROJECT_TEAM` varchar(80) NOT NULL DEFAULT '',
  `HEAD_ICO` BLOB,
  `PASSWORD` varchar(80) NOT NULL DEFAULT '123456',
  `SAFE_MODE` ENUM('Y','N') NOT NULL DEFAULT 'N',
  `CLOUD_DISK_SPACE_SIZE` int(10)  unsigned NOT NULL DEFAULT '50',
  `USED_CLOUD_DISK_SPACE` int(10)  unsigned NOT NULL DEFAULT '0',
  `APPLY_TIME` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `AUDITOR` varchar(80) NOT NULL DEFAULT '',
  `AUDITOR_TIME` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `STATUS` ENUM('NOT AUDITED','AUDITED','REJECTED') NOT NULL DEFAULT 'NOT AUDITED',
  `PERMISSION` SET('super administrator','administrator','regular user')
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


DROP TABLE IF EXISTS `notifications`;
CREATE TABLE `notifications` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `CODE` varchar(30) NOT NULL ,
  `TITLE` varchar(200) NOT NULL DEFAULT '',
  `IMPORTANT_DEGREE` varchar(40) NOT NULL DEFAULT '',
  `FILES_PATH` varchar(400) NOT NULL DEFAULT '',
  `CONTENT` varchar(5000) NOT NULL DEFAULT '',
  `RELEASE_TIME` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `NOTIFYING_PUBLISHER` varchar(40) NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`),
  UNIQUE (`CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `notifications_comment`;
CREATE TABLE `notifications_comment`(
	`ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
	`CODE_ID` varchar(30) NOT NULL DEFAULT '',
	`COMMENT` varchar(500) NOT NULL DEFAULT '',
  `NAME` varchar(80) NOT NULL DEFAULT '',
  `TIME` timestamp not null,
	 PRIMARY KEY (`ID`),
	 CONSTRAINT `FK_CODE_ID_1` FOREIGN KEY (`CODE_ID`) REFERENCES `notifications` (`CODE`) ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `notifications_read_staff`;
CREATE TABLE `notifications_read_staff`(
	`ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
	`CODE_ID` varchar(30) NOT NULL DEFAULT '',
	`STAFF` varchar(40) NOT NULL DEFAULT '',
	 PRIMARY KEY (`ID`),
	 CONSTRAINT `FK_CODE_ID_2` FOREIGN KEY (`CODE_ID`) REFERENCES `notifications` (`CODE`) ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE=InnoDB DEFAULT CHARSET=utf8;
